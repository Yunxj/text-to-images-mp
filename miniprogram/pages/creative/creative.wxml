<!--creative.wxml-->
<view class="container">
  <!-- å¤´éƒ¨æœç´¢ -->
  <view class="search-bar">
    <view class="search-wrapper">
      <input 
        class="search-input" 
        placeholder="æœç´¢ä»»åŠ¡..."
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        bindconfirm="onSearch"
      />
      <view class="search-icon" bindtap="onSearch">ğŸ”</view>
    </view>
  </view>

  <!-- æ•™ç¨‹è§†é¢‘åŒºåŸŸ -->
  <view class="tutorial-section">
    <view class="tutorial-item" bindtap="playTutorial" data-tutorial="{{tutorialVideos[0]}}">
      <view class="tutorial-cover">
        <image class="tutorial-image" src="{{tutorialVideos[0].cover}}" mode="aspectFill" />
        <view class="play-button">â–¶</view>
      </view>
      <view class="tutorial-info">
        <text class="tutorial-title">{{tutorialVideos[0].title}}</text>
        <text class="tutorial-desc">{{tutorialVideos[0].desc}}</text>
      </view>
    </view>

    <view class="tutorial-item" bindtap="playTutorial" data-tutorial="{{tutorialVideos[1]}}">
      <view class="tutorial-cover">
        <image class="tutorial-image" src="{{tutorialVideos[1].cover}}" mode="aspectFill" />
        <view class="play-button">â–¶</view>
      </view>
      <view class="tutorial-info">
        <text class="tutorial-title">{{tutorialVideos[1].title}}</text>
        <text class="tutorial-desc">{{tutorialVideos[1].desc}}</text>
      </view>
    </view>
  </view>

  <!-- åˆ›æ„æ¨¡æ¿ç½‘æ ¼ -->
  <view class="templates-grid">
    <view 
      class="template-item" 
      wx:for="{{templates}}" 
      wx:key="id"
      bindtap="useTemplate"
      data-template="{{item}}"
    >
      <view class="template-cover">
        <image class="template-image" src="{{item.cover}}" mode="aspectFill" />
        <view class="template-overlay">
          <view class="template-badge">{{item.badge}}</view>
          <view class="template-info">
            <text class="template-title">{{item.title}}</text>
            <text class="template-subtitle">{{item.subtitle}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{hasMore}}">
    <view class="load-more-btn" bindtap="loadMoreTemplates">
      <text class="load-more-text">åŠ è½½æ›´å¤šåˆ›æ„</text>
    </view>
  </view>

  <!-- æ²¡æœ‰æ›´å¤šå†…å®¹ -->
  <view class="no-more" wx:if="{{!hasMore && templates.length > 0}}">
    <text class="no-more-text">æ²¡æœ‰æ›´å¤šå†…å®¹äº†</text>
  </view>
</view>

<!-- æ•™ç¨‹æ’­æ”¾å¼¹çª— -->
<view class="tutorial-modal" wx:if="{{showTutorialModal}}">
  <view class="modal-mask" bindtap="closeTutorialModal"></view>
  <view class="modal-content">
    <view class="modal-header">
      <text class="modal-title">{{currentTutorial.title}}</text>
      <text class="modal-close" bindtap="closeTutorialModal">Ã—</text>
    </view>
    <view class="modal-body">
      <video 
        class="tutorial-video"
        src="{{currentTutorial.videoUrl}}"
        poster="{{currentTutorial.cover}}"
        controls
        autoplay
      />
      <view class="tutorial-description">
        <text class="tutorial-desc-text">{{currentTutorial.description}}</text>
      </view>
    </view>
  </view>
</view>

<!-- æ¨¡æ¿é¢„è§ˆå¼¹çª— -->
<view class="template-modal" wx:if="{{showTemplateModal}}">
  <view class="modal-mask" bindtap="closeTemplateModal"></view>
  <view class="modal-content">
    <view class="modal-header">
      <text class="modal-title">{{currentTemplate.title}}</text>
      <text class="modal-close" bindtap="closeTemplateModal">Ã—</text>
    </view>
    <view class="modal-body">
      <view class="template-preview">
        <image class="preview-image" src="{{currentTemplate.preview}}" mode="aspectFit" />
      </view>
      <view class="template-actions">
        <button class="template-btn secondary" bindtap="closeTemplateModal">å–æ¶ˆ</button>
        <button class="template-btn primary" bindtap="confirmUseTemplate">ä½¿ç”¨æ¨¡æ¿</button>
      </view>
    </view>
  </view>
</view> 